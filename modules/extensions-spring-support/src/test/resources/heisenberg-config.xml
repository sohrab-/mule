<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:heisenberg="http://www.mulesoft.org/schema/mule/extension/heisenberg"
      xmlns:util="http://www.springframework.org/schema/util"
      xmlns:spring="http://www.springframework.org/schema/beans"
      xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
               http://www.mulesoft.org/schema/mule/extension/heisenberg http://www.mulesoft.org/schema/mule/extension/heisenberg/current/mule-extension-heisenberg.xsd
               http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

    <heisenberg:config name="heisenberg" cancer="true" dateOfBirth="1959-09-07T00:00:00"
                       dateOfDeath="2011-09-07T00:00:00-05:00" money="1000000">
        <heisenberg:enemies>
            <heisenberg:enemy>Gustavo Fring</heisenberg:enemy>
            <heisenberg:enemy>Hank</heisenberg:enemy>
        </heisenberg:enemies>
        <heisenberg:recipe>
            <heisenberg:recipe key="methylamine">75</heisenberg:recipe>
            <heisenberg:recipe key="pseudoephedrine">0</heisenberg:recipe>
            <heisenberg:recipe key="P2P">25</heisenberg:recipe>
        </heisenberg:recipe>
        <heisenberg:ricin-packs>
            <heisenberg:ricin-pack microgramsPerKilo="22">
                <heisenberg:destination victim="Lidia" address="Stevia coffe shop"/>
            </heisenberg:ricin-pack>
        </heisenberg:ricin-packs>
        <heisenberg:next-door address="pollos hermanos" victim="Gustavo Fring">
            <heisenberg:previous victim="Krazy-8" address="Jesse's" />
        </heisenberg:next-door>
        <heisenberg:candidate-doors>
            <heisenberg:candidate-door key="skyler" value-ref="skylerDoor" />
            <heisenberg:candidate-door key="saul" value-ref="saulDoor" />
        </heisenberg:candidate-doors>
    </heisenberg:config>


    <spring:beans>
        <util:map id="recipes">
            <spring:entry key="methylamine" value="75"/>
            <spring:entry key="pseudoephedrine" value="0"/>
            <spring:entry key="P2P" value="25"/>
        </util:map>

        <util:map id="candidateDoors">
            <spring:entry key="skyler" value-ref="skylerDoor" />
            <spring:entry key="saul" value-ref="saulDoor" />
        </util:map>

        <util:list id="enemies">
            <spring:value>Gustavo Fring</spring:value>
            <spring:value>Hank</spring:value>
        </util:list>

        <util:set id="ricinPacks">
            <spring:ref bean="ricin"/>
        </util:set>

        <spring:bean id="door" class="org.mule.module.extensions.Door">
            <spring:property name="address" value="pollos hermanos"/>
            <spring:property name="victim" value="Gustavo Fring"/>
            <spring:property name="previous">
                <spring:bean class="org.mule.module.extensions.Door">
                    <spring:property name="address" value="Jesse's"/>
                    <spring:property name="victim" value="Krazy-8"/>
                </spring:bean>
            </spring:property>
        </spring:bean>

        <spring:bean id="ricin" class="org.mule.module.extensions.Ricin">
            <spring:property name="microgramsPerKilo" value="22"/>
            <spring:property name="destination">
                <spring:bean class="org.mule.module.extensions.Door">
                    <spring:property name="address" value="Stevia coffe shop"/>
                    <spring:property name="victim" value="Lidia"/>
                </spring:bean>
            </spring:property>
        </spring:bean>

        <spring:bean id="skylerDoor" class="org.mule.module.extensions.Door">
            <spring:property name="victim" value="Skyler" />
            <spring:property name="address" value="308 Negra Arroyo Lane" />
        </spring:bean>

        <spring:bean id="saulDoor" class="org.mule.module.extensions.Door">
            <spring:property name="victim" value="Saul" />
            <spring:property name="address" value="Shopping Mall" />
        </spring:bean>

    </spring:beans>


    <heisenberg:config name="heisenbergByRef" cancer="true" dateOfBirth="1959-09-07T00:00:00"
                       dateOfDeath="2011-09-07T00:00:00-05:00" money="1000000">
        <heisenberg:enemies ref="enemies"/>
        <heisenberg:recipe ref="recipes"/>
        <heisenberg:ricin-packs ref="ricinPacks"/>
        <heisenberg:next-door ref="door"/>
        <heisenberg:candidate-doors ref="candidateDoors" />
    </heisenberg:config>


</mule>